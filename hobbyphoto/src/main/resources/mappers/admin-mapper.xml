<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "mybatis-3-mapper.dtd" >
<mapper namespace="adminMapper">
	<resultMap type="Member" id="resultMember">
		<result column="user_no" property="userNo" />
		<result column="user_id" property="userId" />
		<result column="user_pwd" property="userPwd" />
		<result column="user_name" property="userName" />
		<result column="nickname" property="nickName" />
		<result column="email" property="email" />
		<result column="gender" property="gender" />
		<result column="phone" property="phone" />
		<result column="description" property="description" />
		<result column="profile_img" property="profileImg" />
		<result column="status" property="status" />
		<result column="social" property="social" />
	</resultMap>
	
	<resultMap type="Board" id="boardResult">
		<result column="board_no" property="boardNo"/>
		<result column="board_title" property="boardTitle"/>
		<result column="board_content" property="boardContent"/>
		<result column="nickname" property="boardWriter"/>
		<result column="count" property="count"/>
		<result column="board_type" property="boardType"/>
		<result column="status" property="status"/>
		<result column="create_date" property="createDate"/>
		<result column="board_content" property="boardContent"/>
		<result column="hashtag" property="hashTag"/>
		<result column="thumbnail" property="thumbnail"/>
		<result column="board_writer" property="boardWriter"/>
		<result column="file_path" property="filePath"/>
	</resultMap>
	
	<resultMap type="Attachment" id="AttachmentResult">
		<result column="file_no" property="fileNo"/>
		<result column="file_level" property="fileLevel"/>
		<result column="origin_name" property="originName"/>
		<result column="change_name" property="changeName"/>
		<result column="file_path" property="filePath"/>
		<result column="upload_date" property="uploadDate"/>
		<result column="status" property="status"/>
		<result column="ref_bno" property="refBno"/>
	</resultMap>
	
	<resultMap type="Report" id="ReportResult">
		<result column="rp_no" property="rpNo"></result>
		<result column="guilty" property="guilty"></result>
		<result column="rp_content" property="rpContent"></result>
		<result column="process" property="process"></result>
		<result column="ref_bno" property="refBno"></result>
		<result column="report_uno" property="reportUno"></result>
		<result column="reported_uno" property="reportedUno"></result>
		<result column="board_type" property="boardType"></result>
	</resultMap>
	
	<resultMap type="S_group" id="SgroupResult">
		<result column="group_no" property="groupNo"></result>
		<result column="img" property="img"></result>
		<result column="nickname" property="userNo"></result>
		<result column="title" property="title"></result>
		<result column="conent" property="conent"></result>
		<result column="p_total" property="pTotal"></result>
		<result column="location" property="location"></result>
		<result column="g_date" property="gDate"></result>
		<result column="create_date" property="createDate"></result>
		<result column="status" property="status"></result>
		<result column="board_type" property="boardType"></result>
	</resultMap>
	
		<resultMap type="BackGround" id="BackResult">
		<result column="back_no" property="backNo"></result>
		<result column="nickname" property="userNo"></result>
		<result column="img" property="img"></result>
		<result column="create_date" property="createDate"></result>
		<result column="count" property="count"></result>
		<result column="download" property="downLoad"></result>
	</resultMap>
	
	
  	<!-- 관리자페이지 회원 조회 -->
	<select id="selectMember" resultMap="resultMember">
	select 
		  USER_NO 
		, USER_ID
		, USER_PWD
		, USER_NAME
		, NICKNAME
		, EMAIL
		, GENDER
		, PHONE
		, STATUS
		, SOCIAL
	from member
   where status = 'Y'
	order 
	   by user_no
	</select>
	
	<!-- 관리자페이지 회원 삭제 --> 
	  <update id="deleMember">
	  	update 
	  		   member
	       set status = 'N'
	     where user_id = #{userId}
	  </update>
	  
	 <!-- 사진 게시물 리스트 조회 --> 
	 <select id="selectBoard" resultMap="boardResult">
	  select
	        b.board_no
	      , b.board_title
	      , m.nickname
	      , to_char(b.create_date, 'YYYY-MM-DD') as "create_date"
	   from board b
       join member m on b.board_writer = m.user_no
	  where b.status = 'Y'
	    and b.board_type = 1
	  order 
	     by b.board_no desc
	</select>
	
	<!-- 사진 게시물 삭제 --> 
	  <update id="deleBoard">
	  	update 
	  		   board
	       set status = 'N'
	     where board_title = #{boardTitle}
	  </update>
	
	<!-- 장비 게시판 리스트 조회 --> 
	 <select id="selectBoard2" resultMap="boardResult">
	  select
	        b.board_no
	      , b.board_title
	      , m.nickname
	      , to_char(b.create_date, 'YYYY-MM-DD') as "create_date"
	   from board b
       join member m on b.board_writer = m.user_no
	  where b.status = 'Y'
	    and b.board_type = 2
	  order 
	     by b.board_no desc
	</select>
	
	<!-- 모임 게시판 리스트 조회 --> 
	 <select id="selectBoard3" resultMap="SgroupResult">
	  select
	        g.group_no
	      , g.title
	      , m.nickname
	      , to_char(g.create_date, 'YYYY-MM-DD') as "create_date"
	   from s_group g
       join member m on g.user_no = m.user_no
	  where g.status = 'Y'
	    and g.board_type = 3
	  order 
	     by g.group_no desc
	</select>
	
	<!-- 배경화면 게시판 조회 -->
	<select id="selectBoard4" resultMap="BackResult">
	  select
	        k.back_no
	      , m.nickname
	      , to_char(k.create_date, 'YYYY-MM-DD') as "create_date"
	   from BackGround k
       join member m on k.user_no = m.user_no
	  order 
	     by k.back_no desc
	</select>

	<!-- 신고 게시물 관리 -->
	<select id="selectReport" resultMap="ReportResult">
	SELECT
   		   R.RP_NO
		 , B.BOARD_NO
		 , R.RP_CONTENT
		 , B.BOARD_TYPE
		 , M.USER_ID
	  FROM BOARD B
	  JOIN REPORT R ON(BOARD_NO = REF_BNO)
	  JOIN MEMBER M ON(USER_NO = BOARD_WRITER)
	 WHERE B.BOARD_TYPE = #{boardtype};
	</select>

  <insert id="insertProduct">
  	insert
  		into Product
  		(
  			p_no
  		,	p_name
  		,	category_no
  		,	brand_no
  		,	price
  		,	amount
  		,	thumbnail
  		,	p_dimg
  		,	p_simg
  		)
  		values
  		(
  			SEQ_PRODUCT.nextval
  		,	#{pName}
  		,	#{categoryNo}
  		,	#{brandNo}
  		,	#{price}
  		,	#{amount}
  		,	#{thumbnail}
  		,	#{pDimg}
  		,	#{pSimg}
  		)
  </insert>
</mapper>
